<%- include('layouts/header') %> <%- include('layouts/sidebar') %>

<main class="flex-1 md:ml-64 p-4 md:p-6">
  <!-- MOBILE HEADER -->
  <div class="flex items-center justify-between mb-6 md:hidden">
    <button class="menu-btn bg-blue-600 text-white px-3 py-2 rounded">â˜°</button>
    <h1 class="text-xl font-semibold">User List</h1>
  </div>

  <div class="hidden md:flex justify-between items-center mb-6">
    <h1 class="hidden md:block text-2xl font-semibold mb-6">User List</h1>
    <a
      href="/admin/users/adduser"
      class="text-sm bg-gray-200 px-4 py-2 rounded hover:bg-gray-300"
    >
      add user
    </a>
  </div>
  <!-- CARD -->
  <div class="bg-white p-4 md:p-6 rounded-xl shadow">
    <h2 class="text-xl font-semibold mb-4">Users</h2>

    <% if (data && data.length > 0) { %>

    <!-- TABLE (DESKTOP) -->
    <div class="hidden md:block overflow-x-auto">
      <table class="min-w-full text-sm">
        <thead>
          <tr class="border-b text-left text-gray-500">
            <th class="py-2 px-3">Name</th>
            <th class="py-2 px-3">Email</th>
            <th class="py-2 px-3">Role</th>
            <th class="py-2 px-3">Phone</th>
            <th class="py-2 px-3">Status</th>
            <th class="py-2 px-3">Action</th>
          </tr>
        </thead>

        <tbody>
          <% data.forEach(item => { %>
          <tr class="border-b hover:bg-gray-50">
            <td class="py-3 px-3 font-medium uppercase"><%= item.name %></td>
            <td class="py-3 px-3 break-all"><%= item.email %></td>
            <td class="py-3 px-3"><%= item.role %></td>
            <td class="py-3 px-3"><%= item.phone %></td>
            <td class="py-3 px-3">
              <span
                class="status-toggle cursor-pointer px-3 py-1 rounded-full text-sm font-semibold <%= item.status==='ACTIVE' ? 'bg-green-100 text-green-700' : 'bg-yellow-100 text-yellow-700' %>"
                data-id="<%= item._id %>"
                data-status="<%= item.status %>"
              >
                <%= item.status==="ACTIVE" ? "Active" : "Pending" %>
              </span>
            </td>
            <td class="py-3 px-3 space-x-3">
              <a href="/admin/users/<%= item._id %>" class="text-blue-600"
                >View</a
              >
              <!-- <a href="#" class="text-green-600">Edit</a> -->
            </td>
          </tr>
          <% }) %>
        </tbody>
      </table>
    </div>

    <!-- MOBILE CARDS -->
    <div class="md:hidden space-y-4">
      <% data.forEach(item => { %>
      <div class="border rounded-lg p-4 shadow-sm">
        <p><strong>Name:</strong> <%= item.name %></p>
        <p class="break-all"><strong>Email:</strong> <%= item.email %></p>
        <p><strong>Role:</strong> <%= item.role %></p>
        <p><strong>Phone:</strong> <%= item.phone %></p>
        <p><strong>Department:</strong> <%= item.department %></p>

        <div class="mt-3 space-x-4">
          <a href="/admin/users/<%= item._id %>" class="text-blue-600">View</a>
          <!-- <a href="#" class="text-green-600">Edit</a> -->
        </div>
      </div>
      <% }) %>
    </div>

    <% } else { %>
    <p class="text-gray-500">No data found.</p>
    <% } %>
  </div>
</main>

<%- include('layouts/footer') %>

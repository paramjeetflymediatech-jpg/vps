 
 
<%- include('../layouts/header') %> 
<%- include('../layouts/sidebar') %> 

<div class="md:ml-64 min-h-screen w-full bg-gray-50 p-4 sm:p-6">
  <!-- Page Header -->
  <div class="mb-6">
    <h2 class="text-2xl sm:text-3xl font-bold text-gray-800">Create Class</h2>
    <p class="text-sm text-gray-500 mt-1">
      Fill in the details to publish a new class
    </p>
  </div>

  <!-- Form Card -->
  <div class="max-w-2xl bg-white rounded-2xl shadow border p-6 sm:p-8">
    
  <h2>Edit Class</h2>

  <form method="POST" action="/admin/classes/edit/<%= classdata._id %>" class="space-y-4">

    <!-- COURSE -->
    <label>Course</label>
    <select name="courseId" required>
      <% data.forEach(c => { %>
        <option
          value="<%= c._id %>"
          <%= c._id.toString() === classdata.courseId._id.toString() ? 'selected' : '' %>
        >
          <%= c.title %>
        </option>
      <% }) %>
    </select>

    <!-- TITLE -->
    <label>Class Title</label>
    <input
      name="title"
      value="<%= classdata.title %>"
      required
    />

    <!-- DESCRIPTION -->
    <label>Description</label>
    <textarea name="description"><%= classdata.description %></textarea>

    <!-- MEETING LINK -->
    <label>Meeting Link</label>
    <input
      name="meetingLink"
      value="<%= classdata.meetingLink %>"
    />

    <!-- DATES -->
    <label>Start Date</label>
    <input
      type="date"
      name="startDate"
      value="<%= classdata.startDate.toISOString().slice(0,10) %>"
      required
    />

    <label>End Date</label>
    <input
      type="date"
      name="endDate"
      value="<%= classdata.endDate.toISOString().slice(0,10) %>"
      required
    />

    <!-- SCHEDULE -->
    <label>Schedule</label>
    <% classdata.schedule.forEach((s, i) => { %>
      <div class="schedule-row">
        <select name="schedule[<%= i %>][day]">
          <% ['Mon','Tue','Wed','Thu','Fri','Sat','Sun'].forEach(d => { %>
            <option <%= d === s.day ? 'selected' : '' %>><%= d %></option>
          <% }) %>
        </select>

        <input
          type="time"
          name="schedule[<%= i %>][startTime]"
          value="<%= s.startTime %>"
        />

        <input
          type="time"
          name="schedule[<%= i %>][endTime]"
          value="<%= s.endTime %>"
        />
      </div>
    <% }) %>

    <!-- PRICE -->
    <label>Price</label>
    <input
      type="number"
      name="price"
      value="<%= classdata.price %>"
    />

    <!-- MAX STUDENTS -->
    <label>Max Students</label>
    <input
      type="number"
      name="maxStudents"
      value="<%= classdata.maxStudents %>"
    />

    <!-- STATUS -->
    <label>Status</label>
    <select name="status">
      <% ['UPCOMING','ONGOING','COMPLETED'].forEach(s => { %>
        <option <%= s === classdata.status ? 'selected' : '' %>>
          <%= s %>
        </option>
      <% }) %>
    </select>

    <!-- INSTRUCTOR (READ ONLY) -->
    <label>Instructor</label>
    <input
      value="<%= classdata.tutorId.name %> (<%= classdata.tutorId.email %>)"
      disabled
    />

    <button type="submit">Update Class</button>
  </form>
  </div>

</div>


<%- include('../layouts/footer') %>
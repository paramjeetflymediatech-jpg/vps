<%- include('layouts/header') %>
<%- include('layouts/sidebar') %>

<body class="bg-gray-100 text-gray-800">

  <!-- ================= MAIN WRAPPER ================= -->
  <!-- md:ml-64 â†’ space for sidebar on desktop -->
  <main class="w-full md:ml-64 px-4 sm:px-6 py-6">

    <!-- Centered content -->
    <div class="max-w-7xl mx-auto">

      <!-- ================= PAGE HEADER ================= -->
      <div class="mb-8">
        <h1 class="text-2xl sm:text-3xl font-bold">
          ðŸ“š Course Management
        </h1>
        <p class="text-gray-500 mt-1 text-sm sm:text-base">
          Create and manage all courses from here
        </p>
      </div>

      <!-- ================= CREATE COURSE CARD ================= -->
      <div class="bg-white rounded-xl shadow p-4 sm:p-6 mb-10">

        <h2 class="text-lg sm:text-xl font-semibold mb-6">
          âž• Create New Course
        </h2>

        <!-- Responsive Form -->
        <!-- 1 column on mobile, 2 columns on tablet+ -->
        <form
          action="/admin/courses/create"
          method="POST"
          class="grid grid-cols-1 md:grid-cols-2 gap-6"
        >

          <!-- Course Title -->
          <div>
            <label class="block text-sm font-medium mb-1">
              Course Title
            </label>
            <input
              type="text"
              name="title"
              placeholder="Full Stack Web Development"
              required
              class="w-full px-4 py-2 border rounded-lg
                     focus:ring-2 focus:ring-indigo-500 outline-none"
            />
          </div>

          <!-- Instructor -->
          <div>
            <label class="block text-sm font-medium mb-1">
              Instructor
            </label>
            <input
              type="text"
              name="instructor"
              placeholder="John Doe"
              required
              class="w-full px-4 py-2 border rounded-lg
                     focus:ring-2 focus:ring-indigo-500 outline-none"
            />
          </div>

          <!-- Description (full width) -->
          <div class="md:col-span-2">
            <label class="block text-sm font-medium mb-1">
              Course Description
            </label>
            <textarea
              name="description"
              placeholder="Write course details here..."
              required
              class="w-full px-4 py-2 border rounded-lg
                     focus:ring-2 focus:ring-indigo-500 outline-none
                     resize-none h-28"
            ></textarea>
          </div>

          <!-- Price -->
          <div>
            <label class="block text-sm font-medium mb-1">
              Price (â‚¹)
            </label>
            <input
              type="number"
              name="price"
              placeholder="1999"
              required
              class="w-full px-4 py-2 border rounded-lg
                     focus:ring-2 focus:ring-indigo-500 outline-none"
            />
          </div>

          <!-- Publish Checkbox -->
          <div class="flex items-center gap-3 mt-2 md:mt-7">
            <input
              type="checkbox"
              name="published"
              class="w-5 h-5 text-indigo-600 rounded
                     focus:ring-indigo-500"
            />
            <span class="text-sm">
              Publish immediately
            </span>
          </div>

          <!-- Submit Button -->
          <div class="md:col-span-2 flex justify-end">
            <button
              type="submit"
              class="bg-indigo-600 text-white px-6 py-2 rounded-lg
                     hover:bg-indigo-700 transition"
            >
              âž• Create Course
            </button>
          </div>

        </form>
      </div>

      <!-- ================= EXISTING COURSES ================= -->
      <div class="bg-white rounded-xl shadow p-4 sm:p-6">

        <h2 class="text-lg sm:text-xl font-semibold mb-6">
          ðŸ“– Existing Courses
        </h2>

        <% if (courses && courses.length > 0) { %>

        <!-- Desktop Table -->
        <div class="hidden md:block overflow-x-auto">
          <table class="min-w-full text-sm border-collapse">
            <thead>
              <tr class="bg-gray-50 border-b text-gray-600">
                <th class="py-3 px-4 text-left">Title</th>
                <th class="py-3 px-4 text-left">Instructor</th>
                <th class="py-3 px-4 text-left">Price</th>
                <th class="py-3 px-4 text-left">Status</th>
              </tr>
            </thead>

            <tbody>
              <% courses.forEach(course => { %>
              <tr class="border-b hover:bg-gray-50">
                <td class="py-3 px-4 font-medium">
                  <%= course.title %>
                </td>
                <td class="py-3 px-4">
                  <%= course.instructor %>
                </td>
                <td class="py-3 px-4">
                  â‚¹<%= course.price %>
                </td>
                <td class="py-3 px-4">
                  <span class="px-3 py-1 rounded-full text-xs font-semibold
                    <%= course.published
                      ? 'bg-green-100 text-green-700'
                      : 'bg-yellow-100 text-yellow-700' %>">
                    <%= course.published ? 'Published' : 'Draft' %>
                  </span>
                </td>
              </tr>
              <% }) %>
            </tbody>
          </table>
        </div>

        <!-- Mobile / Tablet Cards -->
        <div class="md:hidden grid grid-cols-1 sm:grid-cols-2 gap-4">
          <% courses.forEach(course => { %>
          <div class="border rounded-xl p-4 bg-gray-50 shadow-sm">
            <h3 class="font-semibold text-gray-800">
              <%= course.title %>
            </h3>
            <p class="text-sm text-gray-600 mt-1">
              Instructor: <%= course.instructor %>
            </p>
            <p class="text-sm text-gray-600">
              Price: â‚¹<%= course.price %>
            </p>
            <span class="inline-block mt-2 px-3 py-1 rounded-full text-xs font-semibold
              <%= course.published
                ? 'bg-green-100 text-green-700'
                : 'bg-yellow-100 text-yellow-700' %>">
              <%= course.published ? 'Published' : 'Draft' %>
            </span>
          </div>
          <% }) %>
        </div>

        <% } else { %>
          <p class="text-gray-500 text-center py-10">
            No courses found.
          </p>
        <% } %>

      </div>

    </div>
  </main>

  <%- include('layouts/footer') %>
</body>
</html>
